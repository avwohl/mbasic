10 REM PMMI LOOP-BACK TEST VERSION 1.01
20 REM TEST ALL DATA TRANSMISSION FUNCTIONS AT ALL BAUD RATES.
30 REM RATES ABOVE 650 BAUD WILL SHOW ERRORS.
40 REM HIGHER RATES ARE POSSIBLE IN THE LOOP BACK MODE THAN 
50 REM MIGHT BE EXPECTED OVER TELEPHONE LINES, BECAUSE LINE
60 REM NOISE CONTRIBUTES TO ERRORS. A MM-103 WHEN IN GOOD
70 REM CONDITION WILL LOOP BACK WITHOUT ERROR AT 600 BAUD.
80 REM ERRORS AT 65 BAUD WILL INDICATE THAT THE MM-103 HAS 
90 REM HARDWRE PROBLEMS.
100 REM EACH TEST LOOP WILL TAKE ABOUT 15 TO 55 SECONDS.
110 REM CONTINOUS AND ERROR SUMMARY TO LIST DEVICE ADDED BY:
120 REM RODERICK W. HART WA3MEZ
130 REM
140 CT=0
150 REM LOOP BACK TEST .
160 PRINT  CHR$(11)
170 PRINT "PMMI MODEM DYNAMIC LOOPBACK TEST"
180 [9E] "PMMI MODEM DYNAMIC LOOPBACK TEST"
190 PRINT:PRINT:PRINT
200 [9E]:[9E]:[9E]
210 PRINT"REMOVE TELEPHONE LINE PLUG FOR THIS TEST.
220 PRINT
230 PRINT"ENTER HIGHEST BAUD RATE":INPUT UP
240 PRINT"ENTER LOWEST BAUD RATE":INPUT LW
250 PRINT"DO YOU WISH CONTINOUS TEST":INPUT Y$
260 IF Y$="Y"  THEN CT=1:IF Y$="YES"  THEN CT=1
270 BR=UP
280 S=1.90735/BR/16
290 IF S>255  THEN 230
300 J=0
310 L=1
320 OUT 194,S
330 OUT 192,94 :    REM SET UP UART AND ANS MODE.
340 OUT 195,64 :REM TEST MODE
350 X=INP(193):X=INP(193) :REM CLEAR OUT UART REGISTER.
360 IF(INP(194) AND 4)=4  THEN 360  :REM WAIT FOR CTS.
370 IF(INP(192) AND 1)=0  THEN 370  :REM CHECK TX BUFFER EMPTY.
380 OUT 193,J
390 J=J+1 :  IF J=256  THEN J=0
400 IF (INP(192) AND 2)=0  THEN 400
410 T=INP(193)
420 IF T<>J-1  AND J<>0  THEN  PRINT"ERROR","WAS",T,"SHOULD BE",J,:E=E+1
430 IF J=0  THEN  PRINT"LOOP NO. "L:L=L+1
440 IF L=5  THEN 480
450 GOTO 370
460 OUT 195,0
470 OUT 192,0
480 L=L-1
490 [9E]  USING "### BAUD = ###.##";BR,(E/(256*L))*100;
500 [9E] " % ERROR"
510 L=0:E=0:IF BR=<LW  THEN [9E] "END OF TEST CYCLE" :ELSE  GOTO 540
520 [9E]:IF CT=1  THEN 270
530 END
540 BR=BR-10:GOTO 280
282 *L))*100;
500 [9E] " % ERRO
