# MBASIC 2025 Runtime Libraries

This directory contains runtime libraries for MBASIC 2025 compiled programs.

## Components

### strings/
Complete string allocation and garbage collection system for MBASIC 2025.

- **Purpose**: Provides O(n log n) garbage collection instead of original O(nÂ²)
- **Files**:
  - `mb25_string.h` - Header file with all declarations
  - `mb25_string.c` - Complete implementation
  - `test_mb25_string.c` - Comprehensive test suite
  - `Makefile` - Build system
  - `README.md` - Detailed documentation
  - `SPECIFICATION.md` - Complete specification
  - `USAGE_GUIDE.md` - Integration guide

- **Building**:
  ```bash
  cd strings
  ./build.sh test    # Build and run tests
  ```

- **Key Features**:
  - Constant string optimization (no heap for literals)
  - Writeable string reuse (in-place modification)
  - Substring sharing (LEFT$/RIGHT$/MID$ without copying)
  - Efficient O(n log n) garbage collection

## Integration with Compiler

The runtime libraries are designed to be linked with the C code generated by the MBASIC to C compiler:

1. Compiler analyzes BASIC program and determines resource needs
2. Generates appropriate `#define` constants (e.g., `MB25_NUM_STRINGS`)
3. Includes runtime headers
4. Links with runtime libraries

## Target Platforms

- **Native**: Linux/Unix development and testing
- **Z80/CP/M**: Production target using z88dk toolchain
- **Emulation**: Testing with Z80 emulators

## Build Requirements

- **Native**: GCC or compatible C compiler
- **Z80**: z88dk toolchain installed
- **Testing**: Standard Unix tools (make, bash)

## License

See main project LICENSE file.